<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analog Society - Document Material</title>
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="content-wrapper">
    <%- include('../partials/header') %>

    <main>
      <div class="container" style="padding: 2rem 0;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
          <div>
            <h2>Add to Your Collection</h2>
            <p class="lead">Document your analog materials with photos, provenance, and technical details. Share with the community and contribute to knowledge preservation.</p>
          </div>
          <a href="/items" class="btn btn-secondary">‚Üê Back to Browse</a>
        </div>

        <% if (locals.errors) { %>
          <div class="form-container" style="background: rgba(220, 53, 69, 0.1); border-color: var(--danger); margin-bottom: 2rem;">
            <h3 style="color: var(--danger); margin-bottom: 1rem;">Please correct the following errors:</h3>
            <ul style="color: var(--danger); margin: 0; padding-left: 1.5rem;">
              <% for (const error of locals.errors) { %>
                <li><%= error %></li>
              <% } %>
            </ul>
          </div>
        <% } %>

        <% if (locals.error) { %>
          <div class="form-container" style="background: rgba(220, 53, 69, 0.1); border-color: var(--danger); margin-bottom: 2rem;">
            <p style="color: var(--danger); margin: 0;"><%= locals.error %></p>
          </div>
        <% } %>

        <form action="/items" method="POST" enctype="multipart/form-data" class="form-container">
          <div class="form-group">
            <label for="name">Item Name *</label>
            <input type="text" id="name" name="name" class="search-input" required 
                   value="<%= locals.item ? locals.item.name : '' %>"
                   placeholder="e.g., Sony Walkman WM-D6C Professional Cassette Recorder"
                   autocomplete="off">
            <small style="color: var(--text-secondary); font-size: 0.8rem;">Include brand, model, and key identifying details</small>
          </div>

          <div class="form-group">
            <label for="description">Description *</label>
            <textarea id="description" name="description" rows="4" class="search-input" required 
                      placeholder="Describe the item's purpose, functionality, and any notable features or characteristics..."><%= locals.item ? locals.item.description : '' %></textarea>
            <small style="color: var(--text-secondary); font-size: 0.8rem;">Help others understand what this item is and how it's used</small>
          </div>

          <div class="form-group">
            <label for="category">Category *</label>
            <select id="category" name="category" class="filter-select" required>
              <option value="" disabled selected>Select Category</option>
              <option value="Audio Equipment" <%= locals.item && locals.item.category === 'Audio Equipment' ? 'selected' : '' %>>Audio Equipment</option>
              <option value="Video Equipment" <%= locals.item && locals.item.category === 'Video Equipment' ? 'selected' : '' %>>Video Equipment</option>
              <option value="Photography" <%= locals.item && locals.item.category === 'Photography' ? 'selected' : '' %>>Photography</option>
              <option value="Books" <%= locals.item && locals.item.category === 'Books' ? 'selected' : '' %>>Books</option>
              <option value="Records" <%= locals.item && locals.item.category === 'Records' ? 'selected' : '' %>>Records</option>
              <option value="Tools" <%= locals.item && locals.item.category === 'Tools' ? 'selected' : '' %>>Tools</option>
              <option value="Art" <%= locals.item && locals.item.category === 'Art' ? 'selected' : '' %>>Art</option>
              <option value="Electronics" <%= locals.item && locals.item.category === 'Electronics' ? 'selected' : '' %>>Electronics</option>
              <option value="Crafts" <%= locals.item && locals.item.category === 'Crafts' ? 'selected' : '' %>>Crafts</option>
              <option value="Others" <%= locals.item && locals.item.category === 'Others' ? 'selected' : '' %>>Others</option>
            </select>
          </div>

          <div class="form-group">
            <label for="condition">Condition *</label>
            <select id="condition" name="condition" class="filter-select" required>
              <option value="" disabled selected>Select Condition</option>
              <option value="Excellent" <%= locals.item && locals.item.condition === 'Excellent' ? 'selected' : '' %>>Excellent - Like new, minimal wear</option>
              <option value="Good" <%= locals.item && locals.item.condition === 'Good' ? 'selected' : '' %>>Good - Functional with some wear</option>
              <option value="Fair" <%= locals.item && locals.item.condition === 'Fair' ? 'selected' : '' %>>Fair - Functional but significant wear</option>
            </select>
          </div>

          <div class="form-group">
            <label for="provenance">Provenance & History</label>
            <textarea id="provenance" name="provenance" rows="3" class="search-input" 
                      placeholder="Where did this item come from? Any interesting history, previous owners, or special significance?"><%= locals.item ? locals.item.provenance : '' %></textarea>
            <small style="color: var(--text-secondary); font-size: 0.8rem;">Optional: Share the story behind this item</small>
          </div>

          <div class="form-group">
            <label for="technicalDetails">Technical Specifications</label>
            <textarea id="technicalDetails" name="technicalDetails" rows="3" class="search-input" 
                      placeholder="Specifications, model numbers, special features, modifications, or technical details..."><%= locals.item ? locals.item.technicalDetails : '' %></textarea>
            <small style="color: var(--text-secondary); font-size: 0.8rem;">Optional: Technical details for enthusiasts and collectors</small>
          </div>

          <div class="form-group">
            <label for="tradeType">Sharing Preference</label>
            <select id="tradeType" name="tradeType" class="filter-select">
              <option value="Share" <%= locals.item && locals.item.tradeType === 'Share' ? 'selected' : '' %>>Share - Document for community knowledge</option>
              <option value="Trade" <%= locals.item && locals.item.tradeType === 'Trade' ? 'selected' : '' %>>Trade - Available for item exchange</option>
              <option value="Rent" <%= locals.item && locals.item.tradeType === 'Rent' ? 'selected' : '' %>>Rent - Available for temporary use</option>
              <option value="Sell" <%= locals.item && locals.item.tradeType === 'Sell' ? 'selected' : '' %>>Sell - Available for purchase</option>
            </select>
            <small style="color: var(--text-secondary); font-size: 0.8rem;">You can change this later in your inventory</small>
          </div>

          <div class="form-group">
            <label for="estimatedValue">Estimated Value (USD)</label>
            <input type="number" id="estimatedValue" name="estimatedValue" class="search-input" 
                   min="0" step="0.01" 
                   value="<%= locals.item ? locals.item.estimatedValue : '' %>"
                   placeholder="0.00">
            <small style="color: var(--text-secondary); font-size: 0.8rem;">Optional: Current market value for insurance and trading purposes</small>
          </div>

          <div class="form-group">
            <label for="images">Photos *</label>
            <input type="file" id="images" name="images" multiple accept="image/*" class="search-input">
            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
              <p><strong>Upload 1-5 photos</strong> showing different angles and important details</p>
              <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.8rem;">
                <li>Front view showing overall condition</li>
                <li>Brand/model labels or markings</li>
                <li>Any unique features or modifications</li>
                <li>Wear patterns or condition details</li>
              </ul>
            </div>
          </div>

          <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: space-between; align-items: center;">
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
              <p style="margin: 0;">By adding this item, you're contributing to the community's knowledge preservation efforts.</p>
            </div>
            <div style="display: flex; gap: 1rem;">
              <button type="submit" class="btn">Add to Collection</button>
              <a href="/items" class="btn btn-secondary">Cancel</a>
            </div>
          </div>
        </form>
      </div>
    </main>

    <%- include('../partials/footer') %>
  </div>

  <script src="/scripts/main.js"></script>
</body>
</html>